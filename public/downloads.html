<h2>Public Downloads</h2>

<div id="publicList"></div>

<script src="js/auth.js"></script>

<script>
async function loadPublic() {
    const res = await fetch(API + "/public-files");
    const files = await res.json();

    const div = document.getElementById("publicList");
    div.innerHTML = "";

    files.forEach(f => {
        div.innerHTML += `
            <p>
                ${f.originalName}
                <button onclick="downloadFile('${f._id}')">Download</button>
            </p>
        `;
    });
}

function downloadFile(id) {
    window.location.href = API + "/files/" + id + "/download";
}

loadPublic();
</script>
