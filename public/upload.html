<h2>Upload File</h2>

<input type="file" id="fileInput">
<select id="privacy">
    <option value="public">Public</option>
    <option value="private">Private</option>
</select>

<button onclick="uploadFile()">Upload</button>
<button onclick="logout()">Logout</button>

<script src="js/auth.js"></script>

<script>
async function uploadFile() {
    const file = document.getElementById("fileInput").files[0];
    const privacy = document.getElementById("privacy").value;

    if (!file) return alert("Select a file");

    const formData = new FormData();
    formData.append("file", file);
    formData.append("privacy", privacy);

    const res = await fetch(API + "/upload", {
        method: "POST",
        headers: { "Authorization": "Bearer " + getToken() },
        body: formData
    });

    const out = await res.json();
    alert(out.message || out.error);
}
</script>
